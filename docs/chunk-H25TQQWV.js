import{$ as p,$c as V,A as E,Ac as R,Bc as z,Cc as H,Dc as J,E as y,Ec as N,Fc as W,H as C,Ha as g,Ic as q,J as I,Ja as s,Ka as B,La as c,Na as P,Ra as h,Sa as U,Ta as S,X as f,Xc as G,Yc as K,Zc as Q,aa as u,fb as T,gb as j,hb as O,ib as w,j as x,o as v,oa as M,ob as A,qa as _,ra as b,ua as r,va as a,wa as k,wc as D,xc as L,yc as F,zc as $}from"./chunk-C7PA23KW.js";var X=(()=>{let i=class i{constructor(e){this.http=e,this.URL_BASE="https://pokeapi.co/api/v2/evolution-chain"}findAllEvolutions(){return this.http.get(this.URL_BASE)}findEvolutionById(e){return this.http.get(`${this.URL_BASE}/${e}/`)}findSpecieByUrl(e){return this.http.get(`${e}`)}};i.\u0275fac=function(t){return new(t||i)(C(w))},i.\u0275prov=y({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();function te(n,i){if(n&1&&(r(0,"mat-card")(1,"mat-card-header"),k(2,"img",1),r(3,"mat-card-title"),s(4),h(5,"titlecase"),a(),r(6,"mat-card-subtitle"),s(7),a()(),r(8,"div",2),k(9,"img",3),a(),r(10,"mat-card-content")(11,"mat-chip-set",4)(12,"mat-chip",5),s(13),a(),r(14,"mat-chip",5),s(15),a(),r(16,"mat-chip",5),s(17),h(18,"number"),a(),r(19,"mat-chip",5),s(20),h(21,"number"),a()()()()),n&2){let l=i.$implicit;p(2),g("src",l.pokemon.sprites.front_default,f),p(2),B(U(5,8,l.pokemon.name)),p(3),c("N\xBA",l.pokemon.id,""),p(2),g("src",l.pokemon.sprites.front_default,f),p(4),c(" Evolution on: ",l.pokemon.level_evolution," "),p(2),c(" Types: ",l.pokemon.typesSecuence," "),p(2),c(" Weight: ",S(18,10,l.pokemon.weight*.1,"1.1-1"),"kg "),p(3),c(" Height: ",S(21,13,l.pokemon.height*.1,"1.1-1"),"m ")}}function ie(n,i){n&1&&(r(0,"h3",6),s(1,"This pokemon does not have evolutions."),a())}var fe=(()=>{let i=class i{constructor(e,t,o,d){this.evolutionService=e,this.speciesService=t,this.pokemonService=o,this.router=d,this.evolutions=[],this.pokemonEvolutions=[]}ngOnInit(){this.getEvolutionsByPokemonId()}goToDetail(e){this.router.navigateByUrl(`detail/${e}`)}getEvolutionsByPokemonId(){this.evolutionService.findSpecieByUrl(this.pokemonEvolutionUrl).subscribe({next:e=>{this.pokemonEvolutions=this.extractEvolutions(e.chain),this.getSpecies()}})}getSpecies(){let e=this.pokemonEvolutions.map(t=>this.speciesService.findSpecieByUrl(t.url));v(e).pipe(E(t=>{let d=t.map(m=>m.id).map(m=>v({pokemon:this.pokemonService.findPokemonById(m),pokemonSpecie:x(t.find(Y=>Y.id===m))}));return v(d)})).subscribe(t=>{this.evolutions=t,this.evolutions=t.map((o,d)=>(o.pokemon.level_evolution=this.pokemonEvolutions[d].level_evolution,o.pokemon.typesSecuence=o.pokemon.types.map(m=>m.type.name.charAt(0).toUpperCase()+m.type.name.slice(1)).join(" | "),o))})}extractEvolutions(e){let t=[];if(e.evolution_details.length>0){let o=e.evolution_details[0];t.push({name:e.species.name,url:e.species.url,level_evolution:o.min_level})}if(e.evolves_to.length>0)for(let o of e.evolves_to)t.push(...this.extractEvolutions(o));return t}};i.\u0275fac=function(t){return new(t||i)(u(X),u(W),u(N),u(A))},i.\u0275cmp=I({type:i,selectors:[["app-pokemon-evolutions"]],inputs:{pokemonEvolutionUrl:"pokemonEvolutionUrl"},standalone:!0,features:[P],decls:4,vars:1,consts:[[1,"evolutions-container"],["mat-card-avatar","","alt","pokemon photo",1,"avatar",3,"src"],[1,"center"],["mat-card-lg-image","","alt","Photo of a Shiba Inu",3,"src"],["cdkDropList","","cdkDropListOrientation","horizontal",1,"example-chip"],["color","primary","cdkDrag","",1,"example-box"],[1,"no-evolutions"]],template:function(t,o){t&1&&(r(0,"div",0),_(1,te,22,16,"mat-card",null,M,!1,ie,2,0),a()),t&2&&b(1,o.evolutions)},dependencies:[O,j,T,J,D,H,F,R,z,$,L,q,Q,G,K,V],styles:["mat-card[_ngcontent-%COMP%]{margin:10px;border:green solid;width:fit-content}.evolutions-container[_ngcontent-%COMP%]{margin:10px;display:flex;align-items:center;justify-content:center}.evolution-img[_ngcontent-%COMP%]{height:300px;width:300px}.center[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto}.detail-button[_ngcontent-%COMP%]{width:100%}.no-evolutions[_ngcontent-%COMP%]{margin:15px}"]});let n=i;return n})();export{fe as PokemonEvolutionsComponent};
