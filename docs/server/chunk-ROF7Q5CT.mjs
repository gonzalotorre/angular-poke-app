import './polyfills.server.mjs';
import{$ as j,Aa as G,Ba as K,Z as D,na as w,oa as F,pa as z,qa as A,ra as L,sa as H,ta as $,ua as J,va as N,wa as R,ya as W,za as q}from"./chunk-OIJB6ZDO.mjs";import{E as M,Ia as E,Ka as y,La as I,Oa as o,P as C,Pa as n,Pb as B,Qa as k,Qb as T,Rb as O,bb as g,db as p,eb as _,fb as c,h as x,hb as P,ia as f,lb as h,mb as b,nb as S,o as v,ra as a,rc as U,sa as u}from"./chunk-7SQWPGAN.mjs";import"./chunk-KRLCULJA.mjs";function V(l,r){if(l&1&&(o(0,"mat-card")(1,"mat-card-header"),k(2,"img",1),o(3,"mat-card-title"),p(4),h(5,"titlecase"),n(),o(6,"mat-card-subtitle"),p(7),n()(),o(8,"div",2),k(9,"img",3),n(),o(10,"mat-card-content")(11,"mat-chip-set",4)(12,"mat-chip",5),p(13),n(),o(14,"mat-chip",5),p(15),n(),o(16,"mat-chip",5),p(17),h(18,"number"),n(),o(19,"mat-chip",5),p(20),h(21,"number"),n()()()()),l&2){let m=r.$implicit;a(2),g("src",m.pokemon.sprites.front_default,f),a(2),_(b(5,8,m.pokemon.name)),a(3),c("N\xBA",m.pokemon.id,""),a(2),g("src",m.pokemon.sprites.front_default,f),a(4),c(" Evolution on: ",m.pokemon.level_evolution," "),a(2),c(" Types: ",m.pokemon.typesSecuence," "),a(2),c(" Weight: ",S(18,10,m.pokemon.weight*.1,"1.1-1"),"kg "),a(3),c(" Height: ",S(21,13,m.pokemon.height*.1,"1.1-1"),"m ")}}function X(l,r){l&1&&(o(0,"h3",6),p(1,"This pokemon does not have evolutions."),n())}var de=(()=>{let r=class r{constructor(t,e,i,d){this.evolutionService=t,this.speciesService=e,this.pokemonService=i,this.router=d,this.evolutions=[],this.pokemonEvolutions=[]}ngOnInit(){this.getEvolutionsByPokemonId()}goToDetail(t){this.router.navigateByUrl(`detail/${t}`)}getEvolutionsByPokemonId(){this.evolutionService.findSpecieByUrl(this.pokemonEvolutionUrl).subscribe({next:t=>{this.pokemonEvolutions=this.extractEvolutions(t.chain),this.getSpecies()}})}getSpecies(){let t=this.pokemonEvolutions.map(e=>this.speciesService.findSpecieByUrl(e.url));v(t).pipe(M(e=>{let d=e.map(s=>s.id).map(s=>v({pokemon:this.pokemonService.findPokemonById(s),pokemonSpecie:x(e.find(Q=>Q.id===s))}));return v(d)})).subscribe(e=>{this.evolutions=e,this.evolutions=e.map((i,d)=>(i.pokemon.level_evolution=this.pokemonEvolutions[d].level_evolution,i.pokemon.typesSecuence=i.pokemon.types.map(s=>s.type.name.charAt(0).toUpperCase()+s.type.name.slice(1)).join(" | "),i))})}extractEvolutions(t){let e=[];if(t.evolution_details.length>0){let i=t.evolution_details[0];e.push({name:t.species.name,url:t.species.url,level_evolution:i.min_level})}if(t.evolves_to.length>0)for(let i of t.evolves_to)e.push(...this.extractEvolutions(i));return e}};r.\u0275fac=function(e){return new(e||r)(u(K),u(R),u(N),u(U))},r.\u0275cmp=C({type:r,selectors:[["app-pokemon-evolutions"]],inputs:{pokemonEvolutionUrl:"pokemonEvolutionUrl"},standalone:!0,features:[P],decls:4,vars:1,consts:[[1,"evolutions-container"],["mat-card-avatar","","alt","pokemon photo",1,"avatar",3,"src"],[1,"center"],["mat-card-lg-image","","alt","Photo of a Shiba Inu",3,"src"],["cdkDropList","","cdkDropListOrientation","horizontal",1,"example-chip"],["color","primary","cdkDrag","",1,"example-box"],[1,"no-evolutions"]],template:function(e,i){e&1&&(o(0,"div",0),y(1,V,22,16,"mat-card",null,E,!1,X,2,0),n()),e&2&&I(1,i.evolutions)},dependencies:[O,T,B,J,w,$,z,L,H,A,F,D,G,W,q,j],styles:["mat-card[_ngcontent-%COMP%]{margin:10px;border:green solid;width:fit-content}.evolutions-container[_ngcontent-%COMP%]{margin:10px;display:flex;align-items:center;justify-content:center}.evolution-img[_ngcontent-%COMP%]{height:300px;width:300px}.center[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto}.detail-button[_ngcontent-%COMP%]{width:100%}.no-evolutions[_ngcontent-%COMP%]{margin:15px}"]});let l=r;return l})();export{de as PokemonEvolutionsComponent};
